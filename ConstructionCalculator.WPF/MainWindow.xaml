<Window x:Class="ConstructionCalculator.WPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ConstructionCalculator.WPF"
        mc:Ignorable="d"
        Title="Construction Calculator" 
        Height="825" 
        Width="520"
        ResizeMode="NoResize"
        WindowStartupLocation="CenterScreen"
        KeyDown="Window_KeyDown"
        Icon="Assets/app.ico">

	<!-- Button styles now defined in App.xaml -->

	<DockPanel>
		<!-- Menu -->
		<Menu DockPanel.Dock="Top">
			<MenuItem Header="Tools">
				<MenuItem Header="Angle Calculator" Click="AngleCalculator_Click"/>
				<MenuItem Header="Stair Calculator" Click="StairCalculator_Click"/>
				<MenuItem Header="Survey Calculator" Click="SurveyCalculator_Click"/>
				<MenuItem Header="Seating Layout Calculator" Click="SeatingLayoutCalculator_Click"/>
				<MenuItem Header="Area Calculator" Click="AreaCalculator_Click"/>
				<MenuItem Header="Unit Converter" Click="UnitConverter_Click"/>
				<Separator/>
				<MenuItem Header="Theme">
					<MenuItem Header="Light" Click="LightTheme_Click"/>
					<MenuItem Header="Dark" Click="DarkTheme_Click"/>
					<MenuItem Header="System Default" Click="SystemTheme_Click"/>
				</MenuItem>
				<Separator/>
				<MenuItem Header="About" Click="About_Click"/>
			</MenuItem>
		</Menu>

		<!-- Main Content -->
		<Grid Margin="20,10,20,20">
			<Grid.RowDefinitions>
				<RowDefinition Height="Auto"/>
				<RowDefinition Height="Auto"/>
				<RowDefinition Height="Auto"/>
				<RowDefinition Height="*"/>
				<RowDefinition Height="Auto"/>
			</Grid.RowDefinitions>

			<!-- Mode Label -->
			<TextBlock x:Name="ModeLabel" 
                       Grid.Row="0"
                       Text="Mode: Fractions (1/16&quot;)"
                       FontSize="14"
                       Margin="0,10,0,5"/>

			<!-- Calculation Chain Label -->
			<TextBlock x:Name="ChainLabel"
                       Grid.Row="1"
                       Text=""
                       FontSize="12"
                       Foreground="Gray"
                       TextAlignment="Right"
                       Margin="0,0,0,5"
                       Height="30"/>

			<!-- Display TextBox -->
			<TextBox x:Name="DisplayTextBox"
                     Grid.Row="2"
                     Text="0&quot;"
                     FontFamily="Consolas"
                     FontSize="36"
                     FontWeight="Bold"
                     TextAlignment="Right"
                     Padding="10"
                     Margin="0,0,0,15"
                     VerticalContentAlignment="Center"
                     KeyDown="DisplayTextBox_KeyDown" Background="#FFE6E6E6"/>

			<!-- Button Grid -->
			<Grid Grid.Row="3" Margin="0,0,0,20">
				<Grid.RowDefinitions>
					<RowDefinition Height="*"/>
					<RowDefinition Height="*"/>
					<RowDefinition Height="*"/>
					<RowDefinition Height="*"/>
					<RowDefinition Height="*"/>
					<RowDefinition Height="*"/>
					<RowDefinition Height="*"/>
				</Grid.RowDefinitions>
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="*"/>
					<ColumnDefinition Width="*"/>
					<ColumnDefinition Width="*"/>
					<ColumnDefinition Width="*"/>
					<ColumnDefinition Width="*"/>
				</Grid.ColumnDefinitions>

				<!-- Row 0: 7, 8, 9, ÷, MC -->
				<Button Grid.Row="0" Grid.Column="0" Content="7" Style="{StaticResource NumberButtonStyle}" Click="Button_Click"/>
				<Button Grid.Row="0" Grid.Column="1" Content="8" Style="{StaticResource NumberButtonStyle}" Click="Button_Click"/>
				<Button Grid.Row="0" Grid.Column="2" Content="9" Style="{StaticResource NumberButtonStyle}" Click="Button_Click"/>
				<Button Grid.Row="0" Grid.Column="3" Content="÷" Style="{StaticResource OperatorButtonStyle}" Click="Button_Click"/>
				<Button Grid.Row="0" Grid.Column="4" Content="MC" Style="{StaticResource MemoryButtonStyle}" Click="Button_Click"/>

				<!-- Row 1: 4, 5, 6, ×, MR -->
				<Button Grid.Row="1" Grid.Column="0" Content="4" Style="{StaticResource NumberButtonStyle}" Click="Button_Click"/>
				<Button Grid.Row="1" Grid.Column="1" Content="5" Style="{StaticResource NumberButtonStyle}" Click="Button_Click"/>
				<Button Grid.Row="1" Grid.Column="2" Content="6" Style="{StaticResource NumberButtonStyle}" Click="Button_Click"/>
				<Button Grid.Row="1" Grid.Column="3" Content="×" Style="{StaticResource OperatorButtonStyle}" Click="Button_Click"/>
				<Button Grid.Row="1" Grid.Column="4" Content="MR" Style="{StaticResource MemoryButtonStyle}" Click="Button_Click"/>

				<!-- Row 2: 1, 2, 3, -, M+ -->
				<Button Grid.Row="2" Grid.Column="0" Content="1" Style="{StaticResource NumberButtonStyle}" Click="Button_Click"/>
				<Button Grid.Row="2" Grid.Column="1" Content="2" Style="{StaticResource NumberButtonStyle}" Click="Button_Click"/>
				<Button Grid.Row="2" Grid.Column="2" Content="3" Style="{StaticResource NumberButtonStyle}" Click="Button_Click"/>
				<Button Grid.Row="2" Grid.Column="3" Content="-" Style="{StaticResource OperatorButtonStyle}" Click="Button_Click"/>
				<Button Grid.Row="2" Grid.Column="4" Content="M+" Style="{StaticResource MemoryButtonStyle}" Click="Button_Click"/>

				<!-- Row 3: 0, ', ", +, M- -->
				<Button Grid.Row="3" Grid.Column="0" Content="0" Style="{StaticResource NumberButtonStyle}" Click="Button_Click"/>
				<Button Grid.Row="4" Grid.Column="2" Content="'" Style="{StaticResource EditorButtonStyle}" Click="Button_Click" Margin="5,6,5,4"/>
				<Button Grid.Row="3" Grid.Column="2" Content="&quot;" Style="{StaticResource EditorButtonStyle}" Click="Button_Click"/>
				<Button Grid.Row="3" Grid.Column="3" Content="+" Style="{StaticResource OperatorButtonStyle}" Click="Button_Click"/>
				<Button Grid.Row="3" Grid.Column="4" Content="M-" Style="{StaticResource MemoryButtonStyle}" Click="Button_Click"/>

				<!-- Row 4: Space, /, ., =, (empty) -->
				<Button Grid.Row="4" Grid.Column="0" Content="Space" Style="{StaticResource EditorButtonStyle}" Click="Button_Click"/>
				<Button Grid.Row="4" Grid.Column="1" Content="/" Style="{StaticResource EditorButtonStyle}" Click="Button_Click"/>
				<Button Grid.Row="3" Grid.Column="1" Content="." Style="{StaticResource NumberButtonStyle}" Click="Button_Click" Margin="5,5,5,5"/>
				<Button Grid.Row="4" Grid.Column="3" Content="=" Style="{StaticResource OperatorButtonStyle}" Click="Button_Click"/>

				<!-- Row 5: %, √, x², +/-, (empty) -->
				<Button Grid.Row="5" Grid.Column="0" Content="%" Style="{StaticResource OperatorButtonStyle}" Click="Button_Click"/>
				<Button Grid.Row="5" Grid.Column="1" Content="√" Style="{StaticResource OperatorButtonStyle}" Click="Button_Click"/>
				<Button Grid.Row="5" Grid.Column="2" Content="x²" Style="{StaticResource OperatorButtonStyle}" Click="Button_Click"/>
				<Button Grid.Row="5" Grid.Column="3" Content="+/-" Style="{StaticResource OperatorButtonStyle}" Click="Button_Click"/>

				<!-- Row 6: C, CE, Copy, Mode, (empty) -->
				<Button Grid.Row="6" Grid.Column="0" Content="C" Style="{StaticResource ActionButtonStyle}" Click="Button_Click"/>
				<Button Grid.Row="6" Grid.Column="1" Content="CE" Style="{StaticResource ActionButtonStyle}" Click="Button_Click"/>
				<Button Grid.Row="6" Grid.Column="2" Content="Copy" Style="{StaticResource ActionButtonStyle}" Click="Button_Click"/>
				<Button Grid.Row="6" Grid.Column="3" Content="Mode" Style="{StaticResource ActionButtonStyle}" Click="Button_Click"/>
			</Grid>

			<!-- Instructions -->
			<TextBlock Grid.Row="4"
                       FontSize="10"
                       TextWrapping="Wrap"
                       Foreground="Gray">
                <Run Text="Enter measurements: 23' 6 1/2&quot; or 6 1/2&quot; or 1/2&quot;"/>
                <LineBreak/>
                <Run Text="Tap = to calculate, C to clear, CE to undo last entry"/>
                <LineBreak/>
                <Run Text="Mode toggles between fractions and decimal inches"/>
			</TextBlock>
		</Grid>
	</DockPanel>
</Window>
