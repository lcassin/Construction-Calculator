<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="ConstructionCalculatorMAUI.Pages.Calculators.Geometry.RampCalculatorPage"
             Title="Accessibility Ramp Calculator">

    <ContentPage.ToolbarItems>
        <ToolbarItem Text="Help" Clicked="OnHelpClicked" />
    </ContentPage.ToolbarItems>

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="15">
            
            <!-- Total Rise Input -->
            <HorizontalStackLayout Spacing="10">
                <Label Text="Total Rise:" WidthRequest="130" VerticalOptions="Center" />
                <Entry x:Name="TotalRiseEntry" WidthRequest="250" 
                       Placeholder="e.g., 3' 6&quot; or 42&quot;" />
            </HorizontalStackLayout>

            <!-- Slope Ratio Input -->
            <HorizontalStackLayout Spacing="10">
                <Label Text="Slope Ratio (1:X):" WidthRequest="130" VerticalOptions="Center" />
                <Entry x:Name="SlopeRatioEntry" WidthRequest="250" Text="12" Keyboard="Numeric" />
            </HorizontalStackLayout>

            <!-- Ramp Width Input -->
            <HorizontalStackLayout Spacing="10">
                <Label Text="Ramp Width:" WidthRequest="130" VerticalOptions="Center" />
                <Entry x:Name="RampWidthEntry" WidthRequest="250" Text="36&quot;" 
                       Placeholder="e.g., 3' or 36&quot;" />
            </HorizontalStackLayout>

            <!-- Calculate Button -->
            <Button Text="Calculate" 
                    Style="{StaticResource PrimaryButton}"
                    Clicked="CalculateButton_Clicked"
                    Margin="0,10,0,10" />

            <!-- Required Run Result -->
            <Frame BorderColor="Gray" Padding="10" CornerRadius="5">
                <Label x:Name="RequiredRunLabel" Text="" FontSize="16" FontAttributes="Bold" 
                       HorizontalOptions="Center" />
            </Frame>

            <!-- Landings Required Result -->
            <Frame BorderColor="Gray" Padding="10" CornerRadius="5">
                <Label x:Name="LandingsRequiredLabel" Text="" FontSize="16" FontAttributes="Bold" 
                       HorizontalOptions="Center" />
            </Frame>

            <!-- Compliance Message -->
            <Label x:Name="ComplianceLabel" Text="" FontSize="12" 
                   HorizontalOptions="Center" />

            <!-- Space Constraints Section -->
            <Label Text="Space Constraints (Optional):" FontSize="14" FontAttributes="Bold" Margin="0,10,0,5" />
            
            <!-- Available Length Input -->
            <HorizontalStackLayout Spacing="10">
                <Label Text="Available Length:" WidthRequest="130" VerticalOptions="Center" />
                <Entry x:Name="AvailableLengthEntry" WidthRequest="250" 
                       Placeholder="e.g., 30' or 25' 6&quot;"
                       Unfocused="AvailableLength_Unfocused" />
            </HorizontalStackLayout>
            
            <!-- Available Width Input -->
            <HorizontalStackLayout Spacing="10">
                <Label Text="Available Width:" WidthRequest="130" VerticalOptions="Center" />
                <Entry x:Name="AvailableWidthEntry" WidthRequest="250" 
                       Placeholder="e.g., 11' or 10' 8&quot;"
                       Unfocused="AvailableWidth_Unfocused" />
            </HorizontalStackLayout>
            
            <!-- Space Fit Result -->
            <Frame x:Name="SpaceFitFrame" BorderColor="Gray" Padding="10" CornerRadius="5" IsVisible="False">
                <Label x:Name="SpaceFitLabel" Text="" FontSize="14" FontAttributes="Bold"
                       HorizontalOptions="Center" />
            </Frame>

            <!-- Include Landings Checkbox -->
            <CheckBox x:Name="IncludeLandingsCheckBox" 
                      CheckedChanged="IncludeLandingsCheckBox_CheckedChanged">
                <CheckBox.Behaviors>
                    <DataTrigger TargetType="CheckBox" Binding="{Binding Source={x:Reference IncludeLandingsCheckBox}, Path=IsChecked}" Value="True">
                        <Setter Property="Color" Value="#00CED1" />
                    </DataTrigger>
                </CheckBox.Behaviors>
            </CheckBox>
            <Label Text="Configure Landings" FontSize="14" FontAttributes="Bold" Margin="0,-40,0,0" Padding="40,0,0,0" />

            <!-- Landing Type Selector -->
            <VerticalStackLayout x:Name="LandingTypePanel" Spacing="10" IsVisible="False">
                <HorizontalStackLayout Spacing="10">
                    <Label Text="Landing Type:" WidthRequest="130" VerticalOptions="Center" />
                    <Picker x:Name="LandingTypePicker" WidthRequest="250" SelectedIndex="0"
                            SelectedIndexChanged="LandingTypePicker_SelectedIndexChanged">
                        <Picker.Items>
                            <x:String>Straight (No Turn)</x:String>
                            <x:String>Right Angle (L-Shaped)</x:String>
                            <x:String>Full Return (U-Shaped)</x:String>
                        </Picker.Items>
                    </Picker>
                </HorizontalStackLayout>

                <!-- Landing Depth Input -->
                <HorizontalStackLayout Spacing="10">
                    <Label Text="Landing Depth:" WidthRequest="130" VerticalOptions="Center" />
                    <Entry x:Name="LandingDepthEntry" WidthRequest="250" 
                           Placeholder="e.g., 6' or 72&quot;"
                           Unfocused="LandingDepth_Unfocused" />
                </HorizontalStackLayout>
            </VerticalStackLayout>

            <!-- Overall Dimensions Result -->
            <Frame x:Name="OverallDimensionsFrame" BorderColor="Gray" Padding="10" BackgroundColor="LightCyan" CornerRadius="5" IsVisible="False">
                <VerticalStackLayout Spacing="5">
                    <Label x:Name="OverallLengthLabel" Text="" FontSize="14" FontAttributes="Bold" 
                           HorizontalOptions="Center" />
                    <Label x:Name="OverallWidthLabel" Text="" FontSize="14" FontAttributes="Bold" 
                           HorizontalOptions="Center" />
                </VerticalStackLayout>
            </Frame>

            <!-- Visual Diagram Label -->
            <Label Text="Ramp Configuration:" FontSize="14" FontAttributes="Bold" Margin="0,10,0,5" />

            <!-- Visual Diagram Display -->
            <Frame BorderColor="Gray" Padding="10" CornerRadius="5" MinimumHeightRequest="250">
                <ScrollView>
                    <Label x:Name="VisualDiagramLabel" FontFamily="Courier" FontSize="11" />
                </ScrollView>
            </Frame>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
